!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e,n,r){this.templateElement=document.getElementById(t),this.hostElement=document.getElementById(e);var o=document.importNode(this.templateElement.content,!0);this.element=o.firstElementChild,r&&(this.element.id=r),this.attach(n)}return t.prototype.attach=function(t){this.hostElement.insertAdjacentElement(t?"afterbegin":"beforeend",this.element)},t}();function o(t){var e=!0;return t.required&&(e=e&&0!==t.value.toString().trim().length),null!=t.minLength&&(e=e&&t.value.toString().trim().length>=t.minLength),null!=t.maxLength&&(e=e&&t.value.toString().trim().length<=t.maxLength),null!=t.minValue&&(e=e&&t.value>=t.minValue),null!=t.maxValue&&(e=e&&t.value<=t.maxValue),e}var i,s=function(){function t(){this.listeners=[],this.postitList=[]}return t.getInstance=function(){return this._Postits||(this._Postits=new t),this._Postits},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.addPostit=function(t){var e=this.Validation(t);return e&&(this.postitList.push(t),this.updateListeners()),e},t.prototype.movePostit=function(t,e){var n=this.postitList.filter((function(e){return e.id===t}))[0];n&&n.status!==e&&(n.status=e,this.updateListeners())},t.prototype.updateListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++){(0,e[t])(this.postitList.slice())}},t.prototype.Validation=function(t){var e={value:t.title,required:!1,minLength:0,maxLength:14},n={value:t.description,required:!0,minLength:1,maxLength:140},r={value:t.status,required:!0,minValue:0,maxValue:3};return!!(o(e)&&o(n)&&o(r))},t}().getInstance(),a=function(t,e,n){this.title=t.trim(),this.description=e.trim(),this.status=n,this.id=Math.random().toString()},u=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var e=t.call(this,"project-input","app",!1,"user-input")||this;return e.titleInputElement=e.element.querySelector("#title"),e.descriptionInputElement=e.element.querySelector("#description"),e.valueInputElement=e.element.querySelector("#people"),e.configure(),e}return u(e,t),e.prototype.configure=function(){this.element.addEventListener("submit",this.submitHandler.bind(this))},e.prototype.submitHandler=function(t){t.preventDefault();var e=new a(this.titleInputElement.value,this.descriptionInputElement.value,+this.valueInputElement.value);s.addPostit(e)?(this.titleInputElement.value="",this.descriptionInputElement.value="",this.valueInputElement.value=""):alert("invlaid input: Invalid input")},e}(r);function p(t,e,n){var r=n.value;return{configurable:!0,get:function(){return r.bind(this)}}}var c,d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},h=function(t){function e(e,n){var r=t.call(this,"post-it",e,!1,n.id)||this;return r.postit=n,r.configure(),r.renderContent(),r}return d(e,t),e.prototype.dragStartHandler=function(t){t.dataTransfer.setData("text/plain",this.postit.id),t.dataTransfer.effectAllowed="move"},e.prototype.dragEndHandler=function(t){console.log("DragEnd")},e.prototype.configure=function(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)},e.prototype.renderContent=function(){this.element.querySelector("h2").textContent=this.postit.title,this.element.querySelector("p").textContent=this.postit.description},f([p],e.prototype,"dragStartHandler",null),e}(r),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},y=function(t){function e(e){var n=t.call(this,"project-list","app",!1,e.toString().toLowerCase()+"-post-it")||this;return n.status=e,n.assignedPostits=[],n.configure(),n}return m(e,t),e.prototype.dragOverHandler=function(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))},e.prototype.dropHandler=function(t){var e=t.dataTransfer.getData("text/plain");s.movePostit(e,this.status),this.element.querySelector("ul").classList.remove("droppable")},e.prototype.dragLeaveHandler=function(t){this.element.querySelector("ul").classList.remove("droppable")},e.prototype.configure=function(){var t=this;this.element.querySelector("h2").textContent=this.status.toString(),this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),s.addListener((function(e){var n=e.filter((function(e){return e.status===t.status}));t.assignedPostits=n,t.renderPostits()}))},e.prototype.renderPostits=function(){var t=this.status.toString()+"-post-it-list",e=document.getElementById(this.status.toString().toLocaleLowerCase()+"-post-it").querySelector("ul");e.innerHTML="",e.id=t;for(var n=0,r=this.assignedPostits;n<r.length;n++){var o=r[n];new h(this.element.querySelector("ul").id,o)}},v([p],e.prototype,"dragOverHandler",null),v([p],e.prototype,"dropHandler",null),v([p],e.prototype,"dragLeaveHandler",null),e}(r);!function(t){t[t.Unassigned=0]="Unassigned",t[t.Start=1]="Start",t[t.Continue=2]="Continue",t[t.Stop=3]="Stop"}(c||(c={})),new l,new y(c.Unassigned),new y(c.Start),new y(c.Continue),new y(c.Stop)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy9zcmMvRDovRG9jdW1lbnRzL0Jqc3MvQmVuY2gvS2luc3BhbiB0cmFpbmluZy90cyBkcmFnIGFuZCBkcm9wL3NyYy9jb21wb25lbnQvY29tcG9uZW50LXBvc3RpdC50cyIsIndlYnBhY2s6Ly8vL3NyYy9EOi9Eb2N1bWVudHMvQmpzcy9CZW5jaC9LaW5zcGFuIHRyYWluaW5nL3RzIGRyYWcgYW5kIGRyb3Avc3JjL3V0aWwvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly8vL3NyYy9EOi9Eb2N1bWVudHMvQmpzcy9CZW5jaC9LaW5zcGFuIHRyYWluaW5nL3RzIGRyYWcgYW5kIGRyb3Avc3JjL3N0YXRlL3Bvc3RpdC1jb2x1bW4udHMiLCJ3ZWJwYWNrOi8vLy9zcmMvRDovRG9jdW1lbnRzL0Jqc3MvQmVuY2gvS2luc3BhbiB0cmFpbmluZy90cyBkcmFnIGFuZCBkcm9wL3NyYy9tb2RlbHMvcG9zdGl0LnRzIiwid2VicGFjazovLy8vc3JjL0Q6L0RvY3VtZW50cy9CanNzL0JlbmNoL0tpbnNwYW4gdHJhaW5pbmcvdHMgZHJhZyBhbmQgZHJvcC9zcmMvY29tcG9uZW50L3Bvc3RpdC1pbnB1dC50cyIsIndlYnBhY2s6Ly8vL3NyYy9EOi9Eb2N1bWVudHMvQmpzcy9CZW5jaC9LaW5zcGFuIHRyYWluaW5nL3RzIGRyYWcgYW5kIGRyb3Avc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vLy9zcmMvRDovRG9jdW1lbnRzL0Jqc3MvQmVuY2gvS2luc3BhbiB0cmFpbmluZy90cyBkcmFnIGFuZCBkcm9wL3NyYy9tb2RlbHMvc3RhdHVzLnRzIiwid2VicGFjazovLy8vc3JjL0Q6L0RvY3VtZW50cy9CanNzL0JlbmNoL0tpbnNwYW4gdHJhaW5pbmcvdHMgZHJhZyBhbmQgZHJvcC9zcmMvY29tcG9uZW50L3Bvc3RpdC50cyIsIndlYnBhY2s6Ly8vL3NyYy9EOi9Eb2N1bWVudHMvQmpzcy9CZW5jaC9LaW5zcGFuIHRyYWluaW5nL3RzIGRyYWcgYW5kIGRyb3Avc3JjL2NvbXBvbmVudC9wb3N0aXQtbGlzdC50cyIsIndlYnBhY2s6Ly8vL3NyYy9EOi9Eb2N1bWVudHMvQmpzcy9CZW5jaC9LaW5zcGFuIHRyYWluaW5nL3RzIGRyYWcgYW5kIGRyb3Avc3JjL2FwcC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRlbXBhbHRlSWQiLCJob3N0RWxlbWVudElkIiwiaW5zZXJ0QXRTdGFydCIsIm5ld0VsZW1lbnRJZCIsInRoaXMiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaG9zdEVsZW1lbnQiLCJmb3JtTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaWQiLCJhdHRhY2giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ2YWxpZGF0ZSIsInZhbGlkYXRhYmxlSW5wdXQiLCJpc1ZhbGlkIiwicmVxdWlyZWQiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwicG9zdGl0cyIsImxpc3RlbmVycyIsInBvc3RpdExpc3QiLCJnZXRJbnN0YW5jZSIsIl9Qb3N0aXRzIiwiUG9zdGl0cyIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJGbiIsInB1c2giLCJhZGRQb3N0aXQiLCJwb3N0aXQiLCJ2YWxpZGF0aW9uIiwiVmFsaWRhdGlvbiIsInVwZGF0ZUxpc3RlbmVycyIsIm1vdmVQb3N0aXQiLCJuZXdTdGF0dXMiLCJmaWx0ZXIiLCJzdGF0dXMiLCJzbGljZSIsInByb2plY3QiLCJ0aXRsZVZhbGlkYXRhYmxlIiwidGl0bGUiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwiZGVzY3JpcHRpb24iLCJ2YWx1ZVZhbGlkYXRhYmxlIiwiTWF0aCIsInJhbmRvbSIsInRpdGxlSW5wdXRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50IiwidmFsdWVJbnB1dEVsZW1lbnQiLCJjb25maWd1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwic3VibWl0SGFuZGxlciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJQb3N0aXQiLCJhbGVydCIsIkNvbXBvbmVudFBvc3RpdCIsImF1dG9iaW5kIiwiXyIsIl8yIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiY29uZmlndXJhYmxlIiwiU3RhdHVzIiwiaG9zdElkIiwicmVuZGVyQ29udGVudCIsImRyYWdTdGFydEhhbmRsZXIiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsImRyYWdFbmRIYW5kbGVyIiwiY29uc29sZSIsImxvZyIsInRleHRDb250ZW50IiwidG9Mb3dlckNhc2UiLCJhc3NpZ25lZFBvc3RpdHMiLCJkcmFnT3ZlckhhbmRsZXIiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImRyb3BIYW5kbGVyIiwicG9zdGl0SWQiLCJnZXREYXRhIiwicmVtb3ZlIiwiZHJhZ0xlYXZlSGFuZGxlciIsInJlbGV2YW50UHJvamVjdHMiLCJwcmoiLCJyZW5kZXJQb3N0aXRzIiwibGlzdElkIiwibGlzdEVsIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJpbm5lckhUTUwi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QW9COUIsRUFBTytCLE9BQy9CLElBQUksRUFBb0IvQixFQUFPZ0MsVUFDL0IsSUFBSSxFQUFvQmhDLEVBQU9pQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50UG9zdGl0PFxyXG4gIFQgZXh0ZW5kcyBIVE1MRWxlbWVudCxcclxuICBVIGV4dGVuZHMgSFRNTEVsZW1lbnRcclxuPiB7XHJcbiAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gIGhvc3RFbGVtZW50OiBUO1xyXG4gIGVsZW1lbnQ6IFU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgdGVtcGFsdGVJZDogc3RyaW5nLFxyXG4gICAgaG9zdEVsZW1lbnRJZDogc3RyaW5nLFxyXG4gICAgaW5zZXJ0QXRTdGFydDogYm9vbGVhbixcclxuICAgIG5ld0VsZW1lbnRJZD86IHN0cmluZ1xyXG4gICkge1xyXG4gICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgdGVtcGFsdGVJZFxyXG4gICAgKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFQ7XHJcblxyXG4gICAgY29uc3QgZm9ybU5vZGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIHRydWUpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZm9ybU5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuICAgIGlmIChuZXdFbGVtZW50SWQpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LmlkID0gbmV3RWxlbWVudElkO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXR0YWNoKGluc2VydEF0U3RhcnQpO1xyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcblxyXG4gIHByaXZhdGUgYXR0YWNoKGluc2VydEF0U3RhcnQ6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuaG9zdEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFxyXG4gICAgICBpbnNlcnRBdFN0YXJ0ID8gXCJhZnRlcmJlZ2luXCIgOiBcImJlZm9yZWVuZFwiLFxyXG4gICAgICB0aGlzLmVsZW1lbnRcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xyXG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xyXG4gIG1pbkxlbmd0aD86IG51bWJlcjtcclxuICBtYXhMZW5ndGg/OiBudW1iZXI7XHJcblxyXG4gIG1pblZhbHVlPzogbnVtYmVyO1xyXG4gIG1heFZhbHVlPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUodmFsaWRhdGFibGVJbnB1dDogVmFsaWRhdGFibGUpOiBib29sZWFuIHtcclxuICBsZXQgaXNWYWxpZCA9IHRydWU7XHJcblxyXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0LnJlcXVpcmVkKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICB9XHJcblxyXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsKSB7XHJcbiAgICBpc1ZhbGlkID1cclxuICAgICAgaXNWYWxpZCAmJlxyXG4gICAgICB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCA+PVxyXG4gICAgICAgIHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9IG51bGwpIHtcclxuICAgIGlzVmFsaWQgPVxyXG4gICAgICBpc1ZhbGlkICYmXHJcbiAgICAgIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoIDw9XHJcbiAgICAgICAgdmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGg7XHJcbiAgfVxyXG5cclxuICBpZiAodmFsaWRhdGFibGVJbnB1dC5taW5WYWx1ZSAhPSBudWxsKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluVmFsdWU7XHJcbiAgfVxyXG5cclxuICBpZiAodmFsaWRhdGFibGVJbnB1dC5tYXhWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlIDw9IHZhbGlkYXRhYmxlSW5wdXQubWF4VmFsdWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaXNWYWxpZDtcclxufVxyXG4iLCJpbXBvcnQgeyBWYWxpZGF0YWJsZSB9IGZyb20gXCIuLi91dGlsL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tIFwiLi4vdXRpbC92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7IFBvc3RpdCB9IGZyb20gXCIuLi9tb2RlbHMvcG9zdGl0XCI7XHJcbmltcG9ydCB7IFN0YXR1cyB9IGZyb20gXCIuLi9tb2RlbHMvc3RhdHVzXCI7XHJcblxyXG50eXBlIExpc3RlbmVyID0gKGl0ZW1zOiBQb3N0aXRbXSkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3N0aXRzIHtcclxuICBwcml2YXRlIGxpc3RlbmVyczogTGlzdGVuZXJbXSA9IFtdO1xyXG5cclxuICBwb3N0aXRMaXN0OiBQb3N0aXRbXSA9IFtdO1xyXG5cclxuICBob3N0RWxlbWVudD86IEhUTUxFbGVtZW50O1xyXG4gIHBvc3RpdFRlbXBsYXRlPzogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICBwb3N0aXRFbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIF9Qb3N0aXRzOiBQb3N0aXRzO1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgaWYgKHRoaXMuX1Bvc3RpdHMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX1Bvc3RpdHM7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9Qb3N0aXRzID0gbmV3IFBvc3RpdHMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fUG9zdGl0cztcclxuICB9XHJcblxyXG4gIGFkZExpc3RlbmVyKGxpc3RlbmVyRm46IExpc3RlbmVyKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyRm4pO1xyXG4gIH1cclxuXHJcbiAgYWRkUG9zdGl0KHBvc3RpdDogUG9zdGl0KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5WYWxpZGF0aW9uKHBvc3RpdCk7XHJcblxyXG4gICAgaWYgKHZhbGlkYXRpb24pIHtcclxuICAgICAgdGhpcy5wb3N0aXRMaXN0LnB1c2gocG9zdGl0KTtcclxuXHJcbiAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbiAgfVxyXG5cclxuICBtb3ZlUG9zdGl0KGlkOiBzdHJpbmcsIG5ld1N0YXR1czogU3RhdHVzKSB7XHJcbiAgICBjb25zdCBwb3N0aXQgPSB0aGlzLnBvc3RpdExpc3QuZmlsdGVyKChwb3N0aXQpID0+IHBvc3RpdC5pZCA9PT0gaWQpWzBdO1xyXG5cclxuICAgIGlmIChwb3N0aXQgJiYgcG9zdGl0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XHJcbiAgICAgIHBvc3RpdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUxpc3RlbmVycygpIHtcclxuICAgIGZvciAoY29uc3QgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICBsaXN0ZW5lckZuKHRoaXMucG9zdGl0TGlzdC5zbGljZSgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgVmFsaWRhdGlvbihwcm9qZWN0OiBQb3N0aXQpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHRpdGxlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogcHJvamVjdC50aXRsZSxcclxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxyXG4gICAgICBtaW5MZW5ndGg6IDAsXHJcbiAgICAgIG1heExlbmd0aDogMTQsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogcHJvamVjdC5kZXNjcmlwdGlvbixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbkxlbmd0aDogMSxcclxuICAgICAgbWF4TGVuZ3RoOiAxNDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHZhbHVlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogcHJvamVjdC5zdGF0dXMsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBtaW5WYWx1ZTogMCxcclxuICAgICAgbWF4VmFsdWU6IDMsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChcclxuICAgICAgIXZhbGlkYXRlKHRpdGxlVmFsaWRhdGFibGUpIHx8XHJcbiAgICAgICF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSB8fFxyXG4gICAgICAhdmFsaWRhdGUodmFsdWVWYWxpZGF0YWJsZSlcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwb3N0aXRzID0gUG9zdGl0cy5nZXRJbnN0YW5jZSgpO1xyXG4iLCJpbXBvcnQgeyBTdGF0dXMgfSBmcm9tIFwic3RhdHVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9zdGl0IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICBzdGF0dXM6IFN0YXR1cztcclxuXHJcbiAgY29uc3RydWN0b3IodDogc3RyaW5nLCBkOiBzdHJpbmcsIHN0YXR1czogU3RhdHVzKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdC50cmltKCk7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZC50cmltKCk7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbXBvbmVudFBvc3RpdCB9IGZyb20gXCIuL2NvbXBvbmVudC1wb3N0aXRcIjtcclxuaW1wb3J0IHsgcG9zdGl0cyB9IGZyb20gXCIuLi9zdGF0ZS9wb3N0aXQtY29sdW1uXCI7XHJcbmltcG9ydCB7IFBvc3RpdCB9IGZyb20gXCIuLi9tb2RlbHMvcG9zdGl0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnRQb3N0aXQ8XHJcbiAgSFRNTERpdkVsZW1lbnQsXHJcbiAgSFRNTEZvcm1FbGVtZW50XHJcbj4ge1xyXG4gIHRpdGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIHZhbHVlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKFwicHJvamVjdC1pbnB1dFwiLCBcImFwcFwiLCBmYWxzZSwgXCJ1c2VyLWlucHV0XCIpO1xyXG5cclxuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjdGl0bGVcIlxyXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNkZXNjcmlwdGlvblwiXHJcbiAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLnZhbHVlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI3Blb3BsZVwiXHJcbiAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0SGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgcG9zdGl0ID0gbmV3IFBvc3RpdChcclxuICAgICAgdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZSxcclxuICAgICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudC52YWx1ZSxcclxuICAgICAgK3RoaXMudmFsdWVJbnB1dEVsZW1lbnQudmFsdWVcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcG9zdGl0VmFsaWRhdGlvbiA9IHBvc3RpdHMuYWRkUG9zdGl0KHBvc3RpdCk7XHJcblxyXG4gICAgaWYgKHBvc3RpdFZhbGlkYXRpb24pIHtcclxuICAgICAgdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICB0aGlzLnZhbHVlSW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsZXJ0KGBpbnZsYWlkIGlucHV0OiAke1wiSW52YWxpZCBpbnB1dFwifWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gYXV0b2JpbmQoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcclxuICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XHJcbiAgY29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgZ2V0KCkge1xyXG4gICAgICBjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcclxuICAgICAgcmV0dXJuIGJvdW5kRm47XHJcbiAgICB9LFxyXG4gIH07XHJcbiAgcmV0dXJuIGFkakRlc2NyaXB0b3I7XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gU3RhdHVzIHtcclxuICBVbmFzc2lnbmVkLFxyXG4gIFN0YXJ0LFxyXG4gIENvbnRpbnVlLFxyXG4gIFN0b3AsXHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50UG9zdGl0IH0gZnJvbSBcIi4vY29tcG9uZW50LXBvc3RpdFwiO1xyXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcbmltcG9ydCB7IFBvc3RpdCB9IGZyb20gXCIuLi9tb2RlbHMvcG9zdGl0XCI7XHJcbmltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9zdGl0Q29tcG9uZW50XHJcbiAgZXh0ZW5kcyBDb21wb25lbnRQb3N0aXQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD5cclxuICBpbXBsZW1lbnRzIERyYWdnYWJsZSB7XHJcbiAgcHJpdmF0ZSBwb3N0aXQ6IFBvc3RpdDtcclxuXHJcbiAgY29uc3RydWN0b3IoaG9zdElkOiBzdHJpbmcsIHBvc3RpdDogUG9zdGl0KSB7XHJcbiAgICBzdXBlcihcInBvc3QtaXRcIiwgaG9zdElkLCBmYWxzZSwgcG9zdGl0LmlkKTtcclxuXHJcbiAgICB0aGlzLnBvc3RpdCA9IHBvc3RpdDtcclxuXHJcbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgfVxyXG5cclxuICBAYXV0b2JpbmRcclxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgdGhpcy5wb3N0aXQuaWQpO1xyXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgfVxyXG5cclxuICBkcmFnRW5kSGFuZGxlcihfOiBEcmFnRXZlbnQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiRHJhZ0VuZFwiKTtcclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcik7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgdGhpcy5kcmFnRW5kSGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJDb250ZW50KCkge1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKSEudGV4dENvbnRlbnQgPSB0aGlzLnBvc3RpdC50aXRsZTtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwicFwiKSEudGV4dENvbnRlbnQgPSB0aGlzLnBvc3RpdC5kZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50UG9zdGl0IH0gZnJvbSBcIi4vY29tcG9uZW50LXBvc3RpdFwiO1xyXG5pbXBvcnQgeyBQb3N0aXRDb21wb25lbnQgfSBmcm9tIFwiLi9wb3N0aXRcIjtcclxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tIFwiLi4vZGVjb3JhdG9ycy9hdXRvYmluZFwiO1xyXG5pbXBvcnQgeyBwb3N0aXRzIH0gZnJvbSBcIi4uL3N0YXRlL3Bvc3RpdC1jb2x1bW5cIjtcclxuaW1wb3J0IHsgUG9zdGl0IH0gZnJvbSBcIi4uL21vZGVscy9wb3N0aXRcIjtcclxuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7IFN0YXR1cyB9IGZyb20gXCIuLi9tb2RlbHMvc3RhdHVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9zdGl0TGlzdENvbXBvbmVudFxyXG4gIGV4dGVuZHMgQ29tcG9uZW50UG9zdGl0PEhUTUxEaXZFbGVtZW50LCBIVE1MRWxlbWVudD5cclxuICBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xyXG4gIGFzc2lnbmVkUG9zdGl0czogYW55W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBzdGF0dXM6IFN0YXR1cykge1xyXG4gICAgc3VwZXIoXHJcbiAgICAgIFwicHJvamVjdC1saXN0XCIsXHJcbiAgICAgIFwiYXBwXCIsXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICBgJHtzdGF0dXMudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpfS1wb3N0LWl0YFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFzc2lnbmVkUG9zdGl0cyA9IFtdO1xyXG5cclxuICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgfVxyXG5cclxuICBAYXV0b2JpbmRcclxuICBkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2ZlciAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09IFwidGV4dC9wbGFpblwiKSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhO1xyXG4gICAgICBsaXN0RWwuY2xhc3NMaXN0LmFkZChcImRyb3BwYWJsZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBhdXRvYmluZFxyXG4gIGRyb3BIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuICAgIGNvbnN0IHBvc3RpdElkID0gZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTtcclxuICAgIHBvc3RpdHMubW92ZVBvc3RpdChwb3N0aXRJZCwgdGhpcy5zdGF0dXMpO1xyXG4gICAgY29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSE7XHJcbiAgICBsaXN0RWwuY2xhc3NMaXN0LnJlbW92ZShcImRyb3BwYWJsZVwiKTtcclxuICB9XHJcblxyXG4gIEBhdXRvYmluZFxyXG4gIGRyYWdMZWF2ZUhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgY29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSE7XHJcbiAgICBsaXN0RWwuY2xhc3NMaXN0LnJlbW92ZShcImRyb3BwYWJsZVwiKTtcclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikhLnRleHRDb250ZW50ID0gdGhpcy5zdGF0dXMudG9TdHJpbmcoKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy5kcm9wSGFuZGxlcik7XHJcblxyXG4gICAgcG9zdGl0cy5hZGRMaXN0ZW5lcigocG9zdGl0OiBQb3N0aXRbXSkgPT4ge1xyXG4gICAgICBjb25zdCByZWxldmFudFByb2plY3RzID0gcG9zdGl0LmZpbHRlcigocHJqKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHByai5zdGF0dXMgPT09IHRoaXMuc3RhdHVzO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5hc3NpZ25lZFBvc3RpdHMgPSByZWxldmFudFByb2plY3RzO1xyXG4gICAgICB0aGlzLnJlbmRlclBvc3RpdHMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXJQb3N0aXRzKCkge1xyXG4gICAgY29uc3QgbGlzdElkID0gYCR7dGhpcy5zdGF0dXMudG9TdHJpbmcoKX0tcG9zdC1pdC1saXN0YDtcclxuICAgIGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50XHJcbiAgICAgIC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnN0YXR1cy50b1N0cmluZygpLnRvTG9jYWxlTG93ZXJDYXNlKCl9LXBvc3QtaXRgKSFcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSE7XHJcbiAgICBsaXN0RWwuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGxpc3RFbC5pZCA9IGxpc3RJZDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHBvc3RpdEl0ZW0gb2YgdGhpcy5hc3NpZ25lZFBvc3RpdHMpIHtcclxuICAgICAgbmV3IFBvc3RpdENvbXBvbmVudCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpIS5pZCwgcG9zdGl0SXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElucHV0Q29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50L3Bvc3RpdC1pbnB1dFwiO1xyXG5pbXBvcnQgeyBQb3N0aXRMaXN0Q29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50L3Bvc3RpdC1saXN0XCI7XHJcbmltcG9ydCB7IFN0YXR1cyB9IGZyb20gXCIuL21vZGVscy9zdGF0dXNcIjtcclxuXHJcbm5ldyBJbnB1dENvbXBvbmVudCgpO1xyXG5uZXcgUG9zdGl0TGlzdENvbXBvbmVudChTdGF0dXMuVW5hc3NpZ25lZCk7XHJcbm5ldyBQb3N0aXRMaXN0Q29tcG9uZW50KFN0YXR1cy5TdGFydCk7XHJcbm5ldyBQb3N0aXRMaXN0Q29tcG9uZW50KFN0YXR1cy5Db250aW51ZSk7XHJcbm5ldyBQb3N0aXRMaXN0Q29tcG9uZW50KFN0YXR1cy5TdG9wKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==